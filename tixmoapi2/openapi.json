{
  "openapi": "3.0.0",
  "info": {
    "title": "TixMo API",
    "version": "0.1.0",
    "description": "Enterprise-grade ticket vendor platform API for event promoters",
    "contact": {
      "name": "TixMo Team",
      "email": "api@tixmo.com"
    },
    "license": {
      "name": "Proprietary"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api/v1",
      "description": "Development server"
    },
    {
      "url": "https://api.tixmo.com/v1",
      "description": "Production server (future)"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your JWT access token"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "firstName": {
            "type": "string",
            "description": "User first name"
          },
          "lastName": {
            "type": "string",
            "description": "User last name"
          },
          "phone": {
            "type": "string",
            "nullable": true,
            "description": "User phone number"
          },
          "role": {
            "type": "string",
            "enum": [
              "ADMIN",
              "PROMOTER",
              "CUSTOMER",
              "SCANNER"
            ],
            "description": "User role"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid",
            "nullable": true,
            "description": "Organization ID (for promoters)"
          },
          "emailVerified": {
            "type": "boolean",
            "description": "Email verification status"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string"
          },
          "statusCode": {
            "type": "number"
          },
          "errors": {
            "type": "object",
            "description": "Validation errors (if any)"
          }
        }
      },
      "OrganizationType": {
        "type": "string",
        "enum": [
          "PROMOTER",
          "VENUE",
          "RESELLER"
        ]
      },
      "OrganizationStatus": {
        "type": "string",
        "enum": [
          "ACTIVE",
          "SUSPENDED",
          "PENDING"
        ]
      },
      "EventStatus": {
        "type": "string",
        "enum": [
          "DRAFT",
          "PUBLISHED",
          "ON_SALE",
          "SOLD_OUT",
          "CANCELLED",
          "COMPLETED"
        ]
      },
      "TicketTypeStatus": {
        "type": "string",
        "enum": [
          "ACTIVE",
          "SOLD_OUT",
          "HIDDEN"
        ]
      },
      "OrderStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "PAID",
          "CANCELLED",
          "REFUNDED",
          "PARTIALLY_REFUNDED"
        ]
      },
      "PaymentStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "PROCESSING",
          "SUCCEEDED",
          "FAILED"
        ]
      },
      "TicketStatus": {
        "type": "string",
        "enum": [
          "VALID",
          "USED",
          "CANCELLED",
          "TRANSFERRED"
        ]
      },
      "DiscountType": {
        "type": "string",
        "enum": [
          "PERCENTAGE",
          "FIXED_AMOUNT"
        ]
      },
      "PromoCodeStatus": {
        "type": "string",
        "enum": [
          "ACTIVE",
          "EXPIRED",
          "DISABLED"
        ]
      },
      "ScannerStatus": {
        "type": "string",
        "enum": [
          "ACTIVE",
          "DISABLED",
          "REVOKED"
        ]
      },
      "NotificationType": {
        "type": "string",
        "enum": [
          "ORDER_CONFIRMATION",
          "TICKET_TRANSFER",
          "EVENT_REMINDER",
          "WELCOME",
          "PROMO",
          "ANNOUNCEMENT"
        ]
      },
      "NotificationStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "SENT",
          "FAILED",
          "READ"
        ]
      },
      "Organization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "type": {
            "$ref": "#/components/schemas/OrganizationType"
          },
          "stripeAccountId": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "$ref": "#/components/schemas/OrganizationStatus"
          },
          "settings": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Venue": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "address": {
            "type": "object",
            "additionalProperties": true
          },
          "capacity": {
            "type": "integer"
          },
          "seatingChart": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "timezone": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Event": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "venueId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "slug": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "category": {
            "type": "string"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "startDatetime": {
            "type": "string",
            "format": "date-time"
          },
          "endDatetime": {
            "type": "string",
            "format": "date-time"
          },
          "timezone": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/EventStatus"
          },
          "images": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "salesStart": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "salesEnd": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "capacity": {
            "type": "integer"
          },
          "minTicketPrice": {
            "type": "string",
            "nullable": true,
            "description": "Decimal string"
          },
          "maxTicketPrice": {
            "type": "string",
            "nullable": true,
            "description": "Decimal string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "TicketType": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "price": {
            "type": "string",
            "description": "Decimal string"
          },
          "quantityTotal": {
            "type": "integer"
          },
          "quantityAvailable": {
            "type": "integer"
          },
          "quantitySold": {
            "type": "integer"
          },
          "quantityHeld": {
            "type": "integer"
          },
          "salesStart": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "salesEnd": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "maxPerOrder": {
            "type": "integer"
          },
          "requiresSeatSelection": {
            "type": "boolean"
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "status": {
            "$ref": "#/components/schemas/TicketTypeStatus"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "orderNumber": {
            "type": "string"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "$ref": "#/components/schemas/OrderStatus"
          },
          "totalAmount": {
            "type": "string",
            "description": "Decimal string"
          },
          "feesAmount": {
            "type": "string",
            "description": "Decimal string"
          },
          "taxAmount": {
            "type": "string",
            "description": "Decimal string"
          },
          "discountAmount": {
            "type": "string",
            "description": "Decimal string"
          },
          "paymentStatus": {
            "$ref": "#/components/schemas/PaymentStatus"
          },
          "paymentIntentId": {
            "type": "string",
            "nullable": true
          },
          "paymentMethod": {
            "type": "string",
            "nullable": true
          },
          "promoCodeId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "ipAddress": {
            "type": "string",
            "nullable": true
          },
          "userAgent": {
            "type": "string",
            "nullable": true
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Ticket": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "orderId": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid"
          },
          "ticketTypeId": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "barcode": {
            "type": "string"
          },
          "qrCodeUrl": {
            "type": "string",
            "nullable": true
          },
          "seatInfo": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "status": {
            "$ref": "#/components/schemas/TicketStatus"
          },
          "pricePaid": {
            "type": "string",
            "description": "Decimal string"
          },
          "checkedInAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "checkedInBy": {
            "type": "string",
            "nullable": true
          },
          "transferredFrom": {
            "type": "string",
            "nullable": true
          },
          "transferredAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PromoCode": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "code": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "discountType": {
            "$ref": "#/components/schemas/DiscountType"
          },
          "discountValue": {
            "type": "string",
            "description": "Decimal string"
          },
          "maxUses": {
            "type": "integer",
            "nullable": true
          },
          "usesCount": {
            "type": "integer"
          },
          "validFrom": {
            "type": "string",
            "format": "date-time"
          },
          "validUntil": {
            "type": "string",
            "format": "date-time"
          },
          "applicableEvents": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            }
          },
          "minOrderValue": {
            "type": "string",
            "nullable": true,
            "description": "Decimal string"
          },
          "status": {
            "$ref": "#/components/schemas/PromoCodeStatus"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Scanner": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "deviceId": {
            "type": "string",
            "nullable": true
          },
          "apiKey": {
            "type": "string"
          },
          "organizationId": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "createdBy": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/ScannerStatus"
          },
          "lastUsedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ScanLog": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "scannerId": {
            "type": "string",
            "format": "uuid"
          },
          "ticketId": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid"
          },
          "scanType": {
            "type": "string",
            "enum": [
              "ENTRY",
              "EXIT",
              "VALIDATION"
            ]
          },
          "success": {
            "type": "boolean"
          },
          "failureReason": {
            "type": "string",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "scannedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Notification": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "type": {
            "$ref": "#/components/schemas/NotificationType"
          },
          "status": {
            "$ref": "#/components/schemas/NotificationStatus"
          },
          "subject": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "sentAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "readAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Waitlist": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "eventId": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "NOTIFIED",
              "EXPIRED",
              "PURCHASED"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "NotificationPreference": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "userId": {
            "type": "string",
            "format": "uuid"
          },
          "emailOrderConfirm": {
            "type": "boolean"
          },
          "emailTicketTransfer": {
            "type": "boolean"
          },
          "emailEventReminder": {
            "type": "boolean"
          },
          "emailPromo": {
            "type": "boolean"
          },
          "emailAnnouncement": {
            "type": "boolean"
          },
          "smsOrderConfirm": {
            "type": "boolean"
          },
          "smsEventReminder": {
            "type": "boolean"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 1
          },
          "limit": {
            "type": "integer",
            "minimum": 1
          },
          "total": {
            "type": "integer",
            "minimum": 0
          },
          "pages": {
            "type": "integer",
            "minimum": 0
          }
        }
      },
      "IdParam": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          }
        },
        "required": [
          "id"
        ]
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Users",
      "description": "User management endpoints"
    },
    {
      "name": "Organizations",
      "description": "Organization management endpoints"
    },
    {
      "name": "Venues",
      "description": "Venue management endpoints"
    },
    {
      "name": "Events",
      "description": "Event management endpoints"
    },
    {
      "name": "Ticket Types",
      "description": "Ticket type and pricing management endpoints"
    },
    {
      "name": "Orders",
      "description": "Order and purchase management endpoints"
    },
    {
      "name": "Tickets",
      "description": "Ticket management and check-in endpoints"
    },
    {
      "name": "Promo Codes",
      "description": "Promotional discount code management endpoints"
    },
    {
      "name": "Scanners",
      "description": "Scanner device and ticket scanning endpoints"
    },
    {
      "name": "Notifications",
      "description": "User notifications and preferences endpoints"
    },
    {
      "name": "Analytics",
      "description": "Business analytics and reporting endpoints"
    },
    {
      "name": "Waitlists",
      "description": "Waitlist management for sold-out events"
    },
    {
      "name": "Health",
      "description": "Health check endpoints"
    }
  ],
  "paths": {
    "/analytics/sales": {
      "get": {
        "summary": "Get sales analytics",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales analytics retrieved successfully"
          }
        }
      }
    },
    "/analytics/events": {
      "get": {
        "summary": "Get event analytics",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event analytics retrieved successfully"
          }
        }
      }
    },
    "/analytics/customers": {
      "get": {
        "summary": "Get customer analytics",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Customer analytics retrieved successfully"
          }
        }
      }
    },
    "/analytics/dashboard": {
      "get": {
        "summary": "Get dashboard summary (last 30 days)",
        "tags": [
          "Analytics"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard summary retrieved successfully"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "summary": "Register a new user account",
        "description": "Create a new user account with email and password. Returns access and refresh tokens.",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password",
                  "firstName",
                  "lastName"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john.doe@example.com",
                    "description": "User's email address (must be unique)"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "minLength": 8,
                    "example": "SecurePass123!",
                    "description": "User's password (min 8 characters)"
                  },
                  "firstName": {
                    "type": "string",
                    "example": "John",
                    "description": "User's first name"
                  },
                  "lastName": {
                    "type": "string",
                    "example": "Doe",
                    "description": "User's last name"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890",
                    "description": "User's phone number (optional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        },
                        "accessToken": {
                          "type": "string",
                          "description": "JWT access token (expires in 15 minutes)"
                        },
                        "refreshToken": {
                          "type": "string",
                          "description": "JWT refresh token (expires in 7 days)"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "User registered successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input / Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "409": {
            "description": "Email already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Login to user account",
        "description": "Authenticate user with email and password. Returns access and refresh tokens.",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "john.doe@example.com",
                    "description": "User's email address"
                  },
                  "password": {
                    "type": "string",
                    "format": "password",
                    "example": "SecurePass123!",
                    "description": "User's password"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "user": {
                          "$ref": "#/components/schemas/User"
                        },
                        "accessToken": {
                          "type": "string",
                          "description": "JWT access token"
                        },
                        "refreshToken": {
                          "type": "string",
                          "description": "JWT refresh token"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Login successful"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input / Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/refresh": {
      "post": {
        "summary": "Refresh access token",
        "description": "Get a new access token using a valid refresh token",
        "tags": [
          "Authentication"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "refreshToken"
                ],
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "description": "Valid JWT refresh token",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "accessToken": {
                          "type": "string",
                          "description": "New JWT access token"
                        },
                        "refreshToken": {
                          "type": "string",
                          "description": "New JWT refresh token"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Token refreshed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Missing refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "summary": "Logout user",
        "description": "Logout the current user (client should discard tokens)",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logout successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": null
                    },
                    "message": {
                      "type": "string",
                      "example": "Logout successful"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "summary": "Get current user",
        "description": "Get the profile of the currently authenticated user",
        "tags": [
          "Authentication"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    },
                    "message": {
                      "type": "string",
                      "example": "User retrieved successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/events": {
      "post": {
        "summary": "Create a new event",
        "description": "Create a new event for an organization. Requires ADMIN or PROMOTER role.",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "description",
                  "organizationId",
                  "venueId",
                  "startDateTime",
                  "endDateTime"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "example": "Summer Music Festival 2025"
                  },
                  "description": {
                    "type": "string",
                    "example": "Join us for an amazing night of live music"
                  },
                  "organizationId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "venueId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "startDateTime": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-07-15T19:00:00Z"
                  },
                  "endDateTime": {
                    "type": "string",
                    "format": "date-time",
                    "example": "2025-07-15T23:00:00Z"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "DRAFT",
                      "PUBLISHED",
                      "CANCELLED"
                    ],
                    "default": "DRAFT"
                  },
                  "capacity": {
                    "type": "integer",
                    "example": 5000
                  },
                  "imageUrl": {
                    "type": "string",
                    "format": "uri"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Event created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Organization or venue not found"
          }
        }
      },
      "get": {
        "summary": "List all events",
        "description": "Get a paginated list of events with optional filters",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "venueId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "DRAFT",
                "PUBLISHED",
                "CANCELLED"
              ]
            }
          },
          {
            "in": "query",
            "name": "search",
            "schema": {
              "type": "string"
            },
            "description": "Search in title and description"
          }
        ],
        "responses": {
          "200": {
            "description": "Events retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/events/{id}": {
      "get": {
        "summary": "Get event by ID",
        "description": "Get detailed information about an event including venue and ticket counts",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      },
      "put": {
        "summary": "Update event",
        "description": "Update event details",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "venueId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "startDateTime": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "endDateTime": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "DRAFT",
                      "PUBLISHED",
                      "CANCELLED"
                    ]
                  },
                  "capacity": {
                    "type": "integer"
                  },
                  "imageUrl": {
                    "type": "string"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event updated successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      },
      "delete": {
        "summary": "Delete event",
        "description": "Delete an event (admin only). Cannot delete if event has tickets.",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Event deleted successfully"
          },
          "400": {
            "description": "Cannot delete event with existing tickets"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/publish": {
      "post": {
        "summary": "Publish event",
        "description": "Change event status from DRAFT to PUBLISHED",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event published successfully"
          },
          "400": {
            "description": "Event is already published or cancelled"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/cancel": {
      "post": {
        "summary": "Cancel event",
        "description": "Change event status to CANCELLED",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event cancelled successfully"
          },
          "400": {
            "description": "Event is already cancelled"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/stats": {
      "get": {
        "summary": "Get event statistics",
        "description": "Get real-time statistics for an event including tickets, scans, and occupancy",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event statistics retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/occupancy": {
      "get": {
        "summary": "Get current occupancy",
        "description": "Get real-time venue occupancy for the event",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Occupancy data retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/timeline": {
      "get": {
        "summary": "Get entry timeline",
        "description": "Get hourly breakdown of entries and exits",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "hours",
            "schema": {
              "type": "integer",
              "default": 24
            },
            "description": "Number of hours to look back"
          }
        ],
        "responses": {
          "200": {
            "description": "Entry timeline retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/events/{id}/scanner-stats": {
      "get": {
        "summary": "Get scanner statistics",
        "description": "Get statistics about scanner activity for the event",
        "tags": [
          "Events"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Scanner statistics retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Event not found"
          }
        }
      }
    },
    "/notifications": {
      "get": {
        "summary": "Get user notifications",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "unreadOnly",
            "schema": {
              "type": "string",
              "enum": [
                true,
                false
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notifications retrieved successfully"
          }
        }
      }
    },
    "/notifications/{id}/read": {
      "put": {
        "summary": "Mark notification as read",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification marked as read"
          }
        }
      }
    },
    "/notifications/read-all": {
      "put": {
        "summary": "Mark all notifications as read",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "All notifications marked as read"
          }
        }
      }
    },
    "/notifications/preferences": {
      "get": {
        "summary": "Get notification preferences",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Preferences retrieved successfully"
          }
        }
      },
      "put": {
        "summary": "Update notification preferences",
        "tags": [
          "Notifications"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "emailOrderConfirm": {
                    "type": "boolean"
                  },
                  "emailTicketTransfer": {
                    "type": "boolean"
                  },
                  "emailEventReminder": {
                    "type": "boolean"
                  },
                  "emailPromo": {
                    "type": "boolean"
                  },
                  "emailAnnouncement": {
                    "type": "boolean"
                  },
                  "smsOrderConfirm": {
                    "type": "boolean"
                  },
                  "smsEventReminder": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preferences updated successfully"
          }
        }
      }
    },
    "/orders": {
      "post": {
        "summary": "Create a new order",
        "description": "Create a new order with tickets. This will hold inventory until payment is confirmed.",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "items"
                ],
                "properties": {
                  "items": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "ticketTypeId",
                        "quantity"
                      ],
                      "properties": {
                        "ticketTypeId": {
                          "type": "string",
                          "format": "uuid"
                        },
                        "quantity": {
                          "type": "integer",
                          "example": 2
                        }
                      }
                    }
                  },
                  "promoCode": {
                    "type": "string",
                    "example": "SUMMER2025"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Order created successfully"
          },
          "400": {
            "description": "Invalid input or tickets not available"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket type not found"
          }
        }
      },
      "get": {
        "summary": "List orders",
        "description": "Get a paginated list of orders. Users see only their own orders, admins see all.",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "PENDING",
                "PAID",
                "CANCELLED",
                "REFUNDED",
                "PARTIALLY_REFUNDED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/orders/{id}": {
      "get": {
        "summary": "Get order by ID",
        "description": "Get detailed information about an order. Users can only view their own orders unless they are admin.",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Can only view own orders"
          },
          "404": {
            "description": "Order not found"
          }
        }
      }
    },
    "/orders/{id}/confirm": {
      "post": {
        "summary": "Confirm order",
        "description": "Confirm order after successful payment. This converts held inventory to sold and generates tickets.",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order confirmed successfully"
          },
          "400": {
            "description": "Cannot confirm order in current status"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Order not found"
          }
        }
      }
    },
    "/orders/{id}/cancel": {
      "post": {
        "summary": "Cancel order",
        "description": "Cancel a pending order and release held inventory. Users can cancel their own pending orders.",
        "tags": [
          "Orders"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Order cancelled successfully"
          },
          "400": {
            "description": "Cannot cancel order in current status"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Can only cancel own orders"
          },
          "404": {
            "description": "Order not found"
          }
        }
      }
    },
    "/organizations": {
      "post": {
        "summary": "Create a new organization",
        "description": "Create a new organization (promoter, venue, or reseller). Requires ADMIN or PROMOTER role.",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "slug",
                  "type"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Awesome Events Co"
                  },
                  "slug": {
                    "type": "string",
                    "example": "awesome-events",
                    "description": "URL-friendly identifier (lowercase, numbers, hyphens only)"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "PROMOTER",
                      "VENUE",
                      "RESELLER"
                    ],
                    "example": "PROMOTER"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Organization created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Requires ADMIN or PROMOTER role"
          },
          "409": {
            "description": "Organization with this slug already exists"
          }
        }
      },
      "get": {
        "summary": "List all organizations",
        "description": "Get a paginated list of organizations with optional filters",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "type",
            "schema": {
              "type": "string",
              "enum": [
                "PROMOTER",
                "VENUE",
                "RESELLER"
              ]
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "ACTIVE",
                "SUSPENDED",
                "PENDING"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Organizations retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/organizations/{id}": {
      "get": {
        "summary": "Get organization by ID",
        "description": "Get detailed information about an organization including members and stats",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Organization retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Organization not found"
          }
        }
      },
      "put": {
        "summary": "Update organization",
        "description": "Update organization details. Must be admin or organization member.",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Updated Events Co"
                  },
                  "slug": {
                    "type": "string",
                    "example": "updated-events"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "SUSPENDED",
                      "PENDING"
                    ],
                    "example": "ACTIVE"
                  },
                  "stripeAccountId": {
                    "type": "string",
                    "example": "acct_123456789"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Organization updated successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Organization not found"
          },
          "409": {
            "description": "Slug already exists"
          }
        }
      },
      "delete": {
        "summary": "Delete organization",
        "description": "Delete an organization (admin only). Cannot delete if organization has events or venues.",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Organization deleted successfully"
          },
          "400": {
            "description": "Cannot delete organization with existing events/venues"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "404": {
            "description": "Organization not found"
          }
        }
      }
    },
    "/organizations/{id}/members": {
      "post": {
        "summary": "Add member to organization",
        "description": "Add a user as a member of the organization",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId"
                ],
                "properties": {
                  "userId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Member added successfully"
          },
          "400": {
            "description": "User is already a member"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Organization or user not found"
          }
        }
      }
    },
    "/organizations/{id}/members/{userId}": {
      "delete": {
        "summary": "Remove member from organization",
        "description": "Remove a user from the organization",
        "tags": [
          "Organizations"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "path",
            "name": "userId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Member removed successfully"
          },
          "400": {
            "description": "User is not a member of this organization"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Organization or user not found"
          }
        }
      }
    },
    "/payments/create-intent": {
      "post": {
        "summary": "Create Stripe Payment Intent",
        "description": "Create a payment intent for an existing order",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "orderId"
                ],
                "properties": {
                  "orderId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Payment intent created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "clientSecret": {
                          "type": "string"
                        },
                        "paymentIntentId": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/payments/webhook": {
      "post": {
        "summary": "Stripe Webhook",
        "description": "Handle Stripe webhook events",
        "tags": [
          "Payments"
        ],
        "responses": {
          "200": {
            "description": "Webhook received"
          }
        }
      }
    },
    "/promo-codes": {
      "post": {
        "summary": "Create promo code",
        "description": "Create a new promotional discount code. Requires ADMIN or PROMOTER role.",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "code",
                  "discountType",
                  "discountValue"
                ],
                "properties": {
                  "code": {
                    "type": "string",
                    "example": "SUMMER2025"
                  },
                  "discountType": {
                    "type": "string",
                    "enum": [
                      "PERCENTAGE",
                      "FIXED_AMOUNT"
                    ]
                  },
                  "discountValue": {
                    "type": "number",
                    "example": 20
                  },
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "organizationId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "maxUses": {
                    "type": "integer",
                    "example": 100
                  },
                  "maxUsesPerUser": {
                    "type": "integer",
                    "example": 1
                  },
                  "validFrom": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "validUntil": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "minOrderAmount": {
                    "type": "number",
                    "example": 50
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Promo code created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "409": {
            "description": "Promo code already exists"
          }
        }
      },
      "get": {
        "summary": "List promo codes",
        "description": "Get a paginated list of promo codes",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "eventId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "ACTIVE",
                "INACTIVE",
                "EXPIRED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Promo codes retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/promo-codes/{id}": {
      "get": {
        "summary": "Get promo code by ID",
        "description": "Get detailed information about a promo code",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Promo code retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Promo code not found"
          }
        }
      },
      "put": {
        "summary": "Update promo code",
        "description": "Update promo code details",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "discountType": {
                    "type": "string",
                    "enum": [
                      "PERCENTAGE",
                      "FIXED_AMOUNT"
                    ]
                  },
                  "discountValue": {
                    "type": "number"
                  },
                  "maxUses": {
                    "type": "integer"
                  },
                  "maxUsesPerUser": {
                    "type": "integer"
                  },
                  "validFrom": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "validUntil": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "minOrderAmount": {
                    "type": "number"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "INACTIVE",
                      "EXPIRED"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Promo code updated successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Promo code not found"
          }
        }
      },
      "delete": {
        "summary": "Delete promo code",
        "description": "Delete a promo code (admin only). Cannot delete if it has been used.",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Promo code deleted successfully"
          },
          "400": {
            "description": "Cannot delete used promo code"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "404": {
            "description": "Promo code not found"
          }
        }
      }
    },
    "/promo-codes/validate": {
      "post": {
        "summary": "Validate promo code",
        "description": "Check if a promo code is valid and calculate discount",
        "tags": [
          "Promo Codes"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "code"
                ],
                "properties": {
                  "code": {
                    "type": "string",
                    "example": "SUMMER2025"
                  },
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "orderAmount": {
                    "type": "number",
                    "example": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Validation result returned"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/reports/sales": {
      "get": {
        "summary": "Get sales report",
        "description": "Retrieve sales metrics with filters",
        "tags": [
          "Reports"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "eventId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "startDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "in": "query",
            "name": "groupBy",
            "schema": {
              "type": "string",
              "enum": [
                "day",
                "week",
                "month",
                "event"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales report retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/reports/attendance": {
      "get": {
        "summary": "Get attendance report",
        "description": "Retrieve attendance metrics for an event",
        "tags": [
          "Reports"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "eventId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Attendance report retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/reports/dashboard": {
      "get": {
        "summary": "Get dashboard stats",
        "description": "Retrieve high-level dashboard statistics",
        "tags": [
          "Reports"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dashboard stats retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/scanners/register": {
      "post": {
        "summary": "Register new scanner",
        "description": "Register a new scanner device for an organization/event",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "organizationId"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Main Entrance Scanner"
                  },
                  "deviceId": {
                    "type": "string",
                    "example": "DEVICE-12345"
                  },
                  "organizationId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Scanner registered successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - insufficient permissions"
          }
        }
      }
    },
    "/scanners/auth": {
      "post": {
        "summary": "Authenticate scanner",
        "description": "Authenticate a scanner using API key",
        "tags": [
          "Scanners"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "apiKey"
                ],
                "properties": {
                  "apiKey": {
                    "type": "string",
                    "example": "sk_scanner_abc123..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scanner authenticated successfully"
          },
          "401": {
            "description": "Invalid API key"
          },
          "403": {
            "description": "Scanner disabled or revoked"
          }
        }
      }
    },
    "/scanners/sync": {
      "get": {
        "summary": "Sync tickets",
        "description": "Download valid tickets for offline validation",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "scannerApiKey": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "eventId",
            "required": false,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "since",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tickets synced successfully"
          },
          "401": {
            "description": "Invalid scanner API key"
          }
        }
      }
    },
    "/scanners/validate": {
      "post": {
        "summary": "Upload offline scans",
        "description": "Upload batch of scans performed offline",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "scannerApiKey": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "scans"
                ],
                "properties": {
                  "scans": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "qrData",
                        "scannedAt"
                      ],
                      "properties": {
                        "qrData": {
                          "type": "string"
                        },
                        "scannedAt": {
                          "type": "string",
                          "format": "date-time"
                        },
                        "scanType": {
                          "type": "string",
                          "enum": [
                            "ENTRY",
                            "EXIT",
                            "VALIDATION"
                          ]
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scans processed successfully"
          },
          "401": {
            "description": "Invalid scanner API key"
          }
        }
      }
    },
    "/scanners": {
      "get": {
        "summary": "List scanners",
        "description": "Get list of scanners with optional filters",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "eventId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "ACTIVE",
                "DISABLED",
                "REVOKED"
              ]
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Scanners retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/scanners/scan": {
      "post": {
        "summary": "Scan ticket",
        "description": "Scan a ticket using QR code (requires scanner API key)",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "scannerApiKey": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "qrData"
                ],
                "properties": {
                  "qrData": {
                    "type": "string",
                    "description": "QR code data from ticket",
                    "example": "TICKET:123e4567-e89b-12d3-a456-426614174000:TIX-1234567890-ABC:987e6543-e21b-98d7-a654-321987654321"
                  },
                  "scanType": {
                    "type": "string",
                    "enum": [
                      "ENTRY",
                      "EXIT",
                      "VALIDATION"
                    ],
                    "default": "ENTRY"
                  },
                  "metadata": {
                    "type": "object",
                    "additionalProperties": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scan completed (check success field for result)"
          },
          "401": {
            "description": "Invalid scanner API key"
          }
        }
      }
    },
    "/scanners/logs": {
      "get": {
        "summary": "Get scan logs",
        "description": "Retrieve scan history with filters",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "scannerId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "ticketId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "eventId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "success",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Scan logs retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/scanners/{id}": {
      "get": {
        "summary": "Get scanner by ID",
        "description": "Get detailed information about a scanner",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Scanner retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Scanner not found"
          }
        }
      },
      "put": {
        "summary": "Update scanner",
        "description": "Update scanner details",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "ACTIVE",
                      "DISABLED",
                      "REVOKED"
                    ]
                  },
                  "eventId": {
                    "type": "string",
                    "format": "uuid",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Scanner updated successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Scanner not found"
          }
        }
      },
      "delete": {
        "summary": "Delete scanner",
        "description": "Revoke scanner access (soft delete)",
        "tags": [
          "Scanners"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Scanner deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Scanner not found"
          }
        }
      }
    },
    "/ticket-types": {
      "post": {
        "summary": "Create a new ticket type",
        "description": "Create a new ticket type for an event. Requires ADMIN or PROMOTER role.",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventId",
                  "name",
                  "price",
                  "quantity"
                ],
                "properties": {
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "name": {
                    "type": "string",
                    "example": "General Admission"
                  },
                  "description": {
                    "type": "string",
                    "example": "Standard entry ticket"
                  },
                  "price": {
                    "type": "number",
                    "example": 50
                  },
                  "quantity": {
                    "type": "integer",
                    "example": 1000
                  },
                  "maxPerOrder": {
                    "type": "integer",
                    "example": 10
                  },
                  "salesStart": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "salesEnd": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket type created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Event not found"
          }
        }
      },
      "get": {
        "summary": "List ticket types for an event",
        "description": "Get all ticket types for a specific event",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "eventId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket types retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/ticket-types/{id}": {
      "get": {
        "summary": "Get ticket type by ID",
        "description": "Get detailed information about a ticket type",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket type retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket type not found"
          }
        }
      },
      "put": {
        "summary": "Update ticket type",
        "description": "Update ticket type details",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  },
                  "quantity": {
                    "type": "integer"
                  },
                  "maxPerOrder": {
                    "type": "integer"
                  },
                  "salesStart": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "salesEnd": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket type updated successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket type not found"
          }
        }
      },
      "delete": {
        "summary": "Delete ticket type",
        "description": "Delete a ticket type (admin only). Cannot delete if tickets have been sold.",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Ticket type deleted successfully"
          },
          "400": {
            "description": "Cannot delete ticket type with sold tickets"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "404": {
            "description": "Ticket type not found"
          }
        }
      }
    },
    "/ticket-types/{id}/availability": {
      "post": {
        "summary": "Check ticket availability",
        "description": "Check if tickets are available for purchase",
        "tags": [
          "Ticket Types"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "quantity": {
                    "type": "integer",
                    "example": 2
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Availability checked successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket type not found"
          }
        }
      }
    },
    "/tickets": {
      "get": {
        "summary": "List tickets",
        "description": "Get a list of tickets for the authenticated user. Admins can see all tickets.",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "eventId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "status",
            "schema": {
              "type": "string",
              "enum": [
                "VALID",
                "USED",
                "CANCELLED",
                "TRANSFERRED"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tickets retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/tickets/{id}": {
      "get": {
        "summary": "Get ticket by ID",
        "description": "Get detailed information about a ticket",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket not found"
          }
        }
      }
    },
    "/tickets/{id}/transfer": {
      "post": {
        "summary": "Transfer ticket",
        "description": "Transfer ticket to another user by email",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "recipientEmail"
                ],
                "properties": {
                  "recipientEmail": {
                    "type": "string",
                    "format": "email",
                    "example": "recipient@example.com"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket transferred successfully"
          },
          "400": {
            "description": "Cannot transfer ticket"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket or recipient not found"
          }
        }
      }
    },
    "/tickets/{id}/cancel": {
      "post": {
        "summary": "Cancel ticket",
        "description": "Cancel a ticket and request refund",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ticket cancelled successfully"
          },
          "400": {
            "description": "Cannot cancel ticket"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Ticket not found"
          }
        }
      }
    },
    "/tickets/validate": {
      "post": {
        "summary": "Validate ticket",
        "description": "Validate a ticket by barcode without checking it in",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "barcode"
                ],
                "properties": {
                  "barcode": {
                    "type": "string",
                    "example": "TIX-1234567890-ABC"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Validation result returned"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/tickets/check-in": {
      "post": {
        "summary": "Check in ticket",
        "description": "Mark ticket as used (check in at event entry)",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "barcode"
                ],
                "properties": {
                  "barcode": {
                    "type": "string",
                    "example": "TIX-1234567890-ABC"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Ticket checked in successfully"
          },
          "400": {
            "description": "Ticket is not valid for check-in"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/tickets/{id}/qr": {
      "get": {
        "summary": "Get ticket QR code",
        "description": "Get the QR code for a ticket (generates if not exists)",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "QR code retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "qrCode": {
                          "type": "string",
                          "description": "QR code as data URL"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not ticket owner"
          },
          "404": {
            "description": "Ticket not found"
          }
        }
      }
    },
    "/tickets/{id}/regenerate-qr": {
      "post": {
        "summary": "Regenerate ticket QR code",
        "description": "Generate a new QR code for a ticket (useful after transfer or if compromised)",
        "tags": [
          "Tickets"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "QR code regenerated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "qrCode": {
                          "type": "string",
                          "description": "New QR code as data URL"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Cannot regenerate QR for used/cancelled tickets"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - not ticket owner"
          },
          "404": {
            "description": "Ticket not found"
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "summary": "Get user by ID",
        "description": "Get a user's profile by their ID. Users can only view their own profile unless they are an admin.",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "User ID"
          }
        ],
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Missing or invalid token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Can only view own profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update user profile",
        "description": "Update a user's profile information. Users can only update their own profile unless they are an admin.",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "User ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "firstName": {
                    "type": "string",
                    "example": "John",
                    "description": "User's first name"
                  },
                  "lastName": {
                    "type": "string",
                    "example": "Doe",
                    "description": "User's last name"
                  },
                  "phone": {
                    "type": "string",
                    "example": "+1234567890",
                    "description": "User's phone number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    },
                    "message": {
                      "type": "string",
                      "example": "User updated successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Can only update own profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete user account",
        "description": "Soft delete a user account (admin only). This anonymizes the user's data.",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "description": "User ID"
          }
        ],
        "responses": {
          "204": {
            "description": "User deleted successfully"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Admin only",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "summary": "List all users",
        "description": "Get a paginated list of all users (admin only)",
        "tags": [
          "Users"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            },
            "description": "Page number"
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            },
            "description": "Number of items per page"
          },
          {
            "in": "query",
            "name": "role",
            "schema": {
              "type": "string",
              "enum": [
                "ADMIN",
                "PROMOTER",
                "CUSTOMER",
                "SCANNER"
              ]
            },
            "description": "Filter by user role"
          }
        ],
        "responses": {
          "200": {
            "description": "Users retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "users": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/User"
                          }
                        },
                        "pagination": {
                          "type": "object",
                          "properties": {
                            "page": {
                              "type": "integer",
                              "example": 1
                            },
                            "limit": {
                              "type": "integer",
                              "example": 20
                            },
                            "total": {
                              "type": "integer",
                              "example": 100
                            },
                            "pages": {
                              "type": "integer",
                              "example": 5
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - Admin only",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/venues": {
      "post": {
        "summary": "Create a new venue",
        "description": "Create a new venue for an organization. Requires ADMIN or PROMOTER role.",
        "tags": [
          "Venues"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "organizationId",
                  "address",
                  "capacity"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Madison Square Garden"
                  },
                  "organizationId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "address": {
                    "type": "object",
                    "required": [
                      "street",
                      "city",
                      "state",
                      "country",
                      "postalCode"
                    ],
                    "properties": {
                      "street": {
                        "type": "string",
                        "example": "4 Pennsylvania Plaza"
                      },
                      "city": {
                        "type": "string",
                        "example": "New York"
                      },
                      "state": {
                        "type": "string",
                        "example": "NY"
                      },
                      "country": {
                        "type": "string",
                        "example": "USA"
                      },
                      "postalCode": {
                        "type": "string",
                        "example": "10001"
                      }
                    }
                  },
                  "capacity": {
                    "type": "integer",
                    "example": 20000
                  },
                  "description": {
                    "type": "string",
                    "example": "World-famous arena in Midtown Manhattan"
                  },
                  "timezone": {
                    "type": "string",
                    "example": "America/New_York"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Venue created successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Organization not found"
          },
          "409": {
            "description": "Venue with this slug already exists"
          }
        }
      },
      "get": {
        "summary": "List all venues",
        "description": "Get a paginated list of venues with optional filters",
        "tags": [
          "Venues"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "in": "query",
            "name": "limit",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "organizationId",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "city",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Venues retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/venues/{id}": {
      "get": {
        "summary": "Get venue by ID",
        "description": "Get detailed information about a venue",
        "tags": [
          "Venues"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Venue retrieved successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Venue not found"
          }
        }
      },
      "put": {
        "summary": "Update venue",
        "description": "Update venue details",
        "tags": [
          "Venues"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "slug": {
                    "type": "string"
                  },
                  "address": {
                    "type": "object"
                  },
                  "description": {
                    "type": "string"
                  },
                  "timezone": {
                    "type": "string"
                  },
                  "seatingChart": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Venue updated successfully"
          },
          "400": {
            "description": "Invalid input"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Venue not found"
          }
        }
      },
      "delete": {
        "summary": "Delete venue",
        "description": "Delete a venue (admin only). Cannot delete if venue has events.",
        "tags": [
          "Venues"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Venue deleted successfully"
          },
          "400": {
            "description": "Cannot delete venue with existing events"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden - Admin only"
          },
          "404": {
            "description": "Venue not found"
          }
        }
      }
    },
    "/waitlists/join": {
      "post": {
        "summary": "Join waitlist",
        "description": "Join the waitlist for a sold-out event",
        "tags": [
          "Waitlists"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventId"
                ],
                "properties": {
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Joined waitlist successfully"
          },
          "404": {
            "description": "Event not found"
          },
          "409": {
            "description": "Already on waitlist"
          }
        }
      }
    },
    "/waitlists/leave": {
      "post": {
        "summary": "Leave waitlist",
        "description": "Remove yourself from a waitlist",
        "tags": [
          "Waitlists"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "eventId"
                ],
                "properties": {
                  "eventId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Left waitlist successfully"
          },
          "404": {
            "description": "Not on waitlist"
          }
        }
      }
    },
    "/waitlists/status": {
      "get": {
        "summary": "Get waitlist status",
        "description": "Check if you are on the waitlist for an event",
        "tags": [
          "Waitlists"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "eventId",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status retrieved successfully"
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check",
        "description": "Check if the API is running and healthy",
        "tags": [
          "Health"
        ],
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "uptime": {
                      "type": "number",
                      "description": "Server uptime in seconds"
                    },
                    "environment": {
                      "type": "string",
                      "example": "development"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}